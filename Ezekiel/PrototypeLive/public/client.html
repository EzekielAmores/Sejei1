<!DOCTYPE html>
<html>
<head>
  <title>Client</title>
  <script src="http://localhost:3000/socket.io/socket.io.js"></script>
</head>
<body>
  <h2>Player Game View</h2>
  <div id="log"></div>
  <button id="playBtn" disabled>Click Me</button>

  <script>
    const params = new URLSearchParams(location.search);
    const socket = io('http://localhost:3000');
    const username = params.get('username');
    const userId = params.get('id');

    socket.emit("join_player", { username, userId });

    const playBtn = document.getElementById("playBtn");
    playBtn.onclick = () => {
      socket.emit("player_click", { username });
    };

    socket.on("game_started", () => {
      log("Game has started!");
      playBtn.disabled = false;
    });

    socket.on("message", msg => log(msg));

    function log(msg) {
      document.getElementById("log").innerHTML += `<p>${msg}</p>`;
    }
  </script>
</body>
</html>
